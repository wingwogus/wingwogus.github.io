---
title: "[HTTP] 인터넷 네트워크 정리 - TCP/IP"
excerpt: "TCP는 뭐고 IP는 뭐가 다른거야?"

categories:
  - HTTP
tags:
  - [http, cs]

permalink: /http/tcp-ip/

toc: true
toc_sticky: true

date: 2024-12-30
last_modified_at: 2024-12-30
---
## IP가 무엇일까?

우리가 대략적으로만 알고 있던 IP란 개념에 대해 정리해보자

### Internet Protocol

- IP는 인터넷 프로토콜로 인터넷에 연결되어 있는 장치들을 식별할 수 있도록 부여되는 고유 주소를 뜻한다.
- 예를 들어 100.100.100.100 같은 것이다.
- IP 주소는 IPv4, IPv6 2 종류가 있으며 일반적으로 IP 주소라 함은 IPv4를 뜻한다.

### IPv4

- IP version 4의 약자로 전 세계적으로 사용된 첫 번째 인터넷 프로토콜이다.
- 주소는 32비트 방식으로 8비트식 4자리로 되어 있으며 각 자리는 온점으로 구분한다.
- 약 42억 9천개의 주소를 가질 수 있는데 전세계적으로 인터넷 사용자 수가 급증하며 고갈되고 있는데 이를 해결하기 위해 등장한 것이 바로 IPv6이다.

### IPv6

- IP version 6의 약자로 IPv4의 주소 체계를 128비트로 확장한 차세대 인터넷 프로토콜 주소이다.
- 16비트씩 8자리로 각 자리는 콜론으로 구분한다.
- 네트워크 속도, 보안적인 부분으로도 뛰어나지만 기존의 주소 체계를 모두 변경하기엔 한계가 있어 완전히 상용화되지 않았다.

**IP는 분류하는 방식에 따라 고정 IP, 유동 IP, 공인 IP, 사설 IP로 나눌 수 있다.**

### 고정 IP

- 말 그대로 주소값이 변하지 않고 컴퓨터에 고정적으로 부여된 IP이다.
- 한 번 IP 주소가 부여되면 반납을 하기 전까지는 다른 장비에 부여할 수 없다.
- 보안성이 우수하기 때문에 보안이 필요한 업체나 기관에서 사용한다.

### 유동 IP

- 주소값이 유동적으로 변하는 IP이다.
- 수많은 인터넷 사용자들에게 고정 IP를 부여하기란 불가능에 가깝기 때문에 일정한 주기 또는 사용자들이 인터넷에 접속하는 순간마다 사용하고 있지 않은 IP 주소를 임시로 발급해준다.
- 대부분의 사용자는 유동 IP를 사용한다.

### 공인 IP

- 이러한 IP 주소는 임의로 부여되는 것이 아닌 전 세계적으로 ICANN이라는 기관이 국가별로 사용할 IP 대역을 관리한다.
- 우리나라는 KISA(한국인터넷진흥원)에서 국내 IP 주소들을 부여하고 관리한다.
- 이것을 ISP(Internet Service Provider)인 통신업체들이 부여받고 사용자들은 통신업체에 가입을 통해 IP를 제공받아 인터넷을 사용할 수 있게 된다.
- 이렇게 통신업체에서 발급받은 IP를 공인 IP라고 한다.

### 사설 IP

- 공유기를 사용한 인터넷 접속 환경일 경우 공유기는 공인 IP를 할당받고 해당 공유기에 연결되어 있는 가정이나 회사의 네트워크 기기에는 사설 IP를 할당한다.
- 사설 IP는 어떤 특정 네트워크 안에서 내부적으로 사용되는 고유한 주소를 뜻한다.
- 공인 IP는 전세계적으로 유일하고 사설 IP는 하나의 특정 네트워크 안에서만 유일하다고 생각하면 된다.

### IP 프로토콜의 한계

- 이러한 IP를 통해 우리는 데이터를 주고 받는다.
- 하지만 IP 프로토콜만으로 패킷을 전송하기에는 한계가 존재한다.
- 비연결성
    - 패킷을 받은 대상이 없거나 인터넷에 연결이 되지 않은 상태임에도 불구하고 패킷은 항상 전송된다.
- 비신뢰성
    - 패킷이 중간에 사라지거나 도착하는 순서가 바뀐다면 본래의 데이터와 일치하지 않을 것이다.
- 프로그램 구분
    - 한 IP에서 여러가지 애플리케이션을 실행하여 데이터를 주고 받는다면 구분하지 못하게 된다.

---

## 든든한 조력자들의 증장

**위와 같이 IP 프로토콜 만으로는 통신에 한계가 있기에 등장한 기술들이 있다.**

### TCP(Transmission Control Protocol)

애플리케이션 사이에서 안전하게 데이터를 통신하는 규약이고 통신 속도를 높이면서도 안정성, 신뢰성을 보장하기 위해 탄생했다. 일반적으로 IP와 함께 사용하는데 IP가 데이터 전송을 담당한다면 TCP는 데이터를 담은 패킷을 추적하고 관리한다.

- 연결 지향 - TCP 3 way handshake(가상 연결)
    1. SYN(synchronized): 클라이언트가 서버에게 SYN 플래그가 설정된 메세지롤 보낸다.
    2. SYN-ACK(acknowledgment): 서버는 클라이언트의 SYN에 응답하여 SYN-ACK 메세지를 보낸다.
    3. ACK: 클라이언트는 서버로부터 받은 SYN에 대해 ACK 메세지를 전송한다.
    4. 클라이언트에서 서버로 데이터를 전달한다.
    → 최근에는 3, 4번 과정이 통합되어 진행된다. 
- 데이터 전달 보증
    - 클라이언트에서 데이터를 전송하면 서버에서 데이터를 수신받았다는 메세지를 보낸다.
- 순서 보장
    - 만약 서버에 잘못된 순서로 패킷이 왔다면 해당 패킷부터 다시 보내도록 클라이언트에게 요청을 보낸다.

### UDP(User Datagram Protocol)

사용자 데이터그램 프로토콜로서 비연결형 프로토콜이다. 마치 하얀 도화지처럼 기능이 없다.  IP와 거의 기능이 같지만 PORT라는 기능이 추가된다.

- TCP처럼 데이터 전달이나 순서를 보장해주지 않는다.
- 왜 사용할까 라는 의문이 들지만 UDP는 더이상 수정하지 못 하는 TCP를 더욱 최적화하기 위해 나온 것이다.
→ 데이터 전달 및 순서가 보장되지 않지만 단순하고 빠르다.

### PORT

하나의 IP에서 여러 개의 애플리케이션을 사용한다면 어떻게 구분해야할까? 그래서 나온 것이 PORT 이다.

- TCP/IP 패킷은 출발지와 도착지의 PORT를 가지고 있다.
- 같은 IP 내에서 프로세스를 구분시키기 위해 IP 마지막 콜론 뒤에 붙여준다.
→ 100.100.100.1:8080
- 0~65535 할당이 가능하지만 0~1023은 잘 알려진 포트로 사용하지 않는 것이 좋다.
    - FTP - 20,21
    - TELNET - 23
    - HTTP - 80
    - HTTPS - 443
- 예를 들자면 IP는 아파트 동, PORT는 호수라고 기억하면 된다.

### DNS(Domain Name System)

위에서 말했듯이 IP는 변경될 수 있고 기억하기도 어렵기 때문에 마치 전화번호부처럼 IP를 찾아주는 기능이 바로 DNS이다.

- 도메인 명을 IP 주소로 변환해준다.
    
    
    | 도메인 | IP 주소 |
    | --- | --- |
    | www.google.com | 100.100.100.1 |
    | www.naver.com | 200.200.200.1 |
- 도메인 명을 입력하면 DNS 서버에서 IP를 반환해주고 해당 IP로 접속을 하는 구조이다.